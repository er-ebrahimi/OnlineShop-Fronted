"use strict";(self.webpackChunke_commerce_template=self.webpackChunke_commerce_template||[]).push([[4080],{6664:function(e,t,n){n.d(t,{M:function(){return c}});var a=n(1413),r=(n(2791),n(6871)),s=n(184),c=function(e){return function(t){var n=(0,r.UO)();return(0,s.jsx)(e,(0,a.Z)({param:n},t))}}},4080:function(e,t,n){n.r(t);var a=n(2982),r=n(4165),s=n(1413),c=n(5861),i=n(5671),o=n(3144),d=n(136),u=n(2882),l=n(2791),h=n(6612),m=n(4483),p=n(3174),g=n(1243),f=n(2156),v=n(6664),x=n(184),b=(0,l.lazy)((function(){return n.e(3789).then(n.bind(n,3789))})),j=(0,l.lazy)((function(){return n.e(3720).then(n.bind(n,3720))})),y=(0,l.lazy)((function(){return n.e(9138).then(n.bind(n,9138))})),P=(0,l.lazy)((function(){return n.e(1163).then(n.bind(n,1163))})),N=(0,l.lazy)((function(){return Promise.all([n.e(7114),n.e(8242)]).then(n.bind(n,8242))})),w=function(e){(0,d.Z)(n,e);var t=(0,u.Z)(n);function n(){var e;(0,i.Z)(this,n);for(var o=arguments.length,d=new Array(o),u=0;u<o;u++)d[u]=arguments[u];return(e=t.call.apply(t,[this].concat(d))).state={currentProducts:[],currentPage:null,totalPages:null,totalItems:0,view:"list",image:"",imageURLs:"",selectedType:"other"},e.handleSelectChange=function(t){e.setState({selectedType:t.target.value})},e.onSubmit=function(){var t=(0,c.Z)((0,r.Z)().mark((function t(n){var a,c,i,o,d;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(a=new FormData).append("name",n.name),a.append("bio",n.bio),a.append("address",n.type),a.append("price",n.price),a.append("amount",n.amount),a.append("image",e.state.image),a.append("type",e.state.selectedType),c=localStorage.getItem("authTokens"),i=JSON.parse(c),o=i.access,d={method:"post",maxContentLength:1/0,url:f.J.product.create+e.props.param.id+"/",headers:{Authorization:"Bearer "+o,"Content-Type":"multipart/form-data"},data:a},g.Z.request(d).then((function(t){e.onProductsChanged((0,s.Z)((0,s.Z)({},t.data),{},{image:t.data.image.match(/\/media\/product_images\/.*$/)[0]}))})).catch((function(e){}));case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onProductsChanged=function(t){e.setState({currentProducts:[].concat((0,a.Z)(e.state.currentProducts),[t])})},e.onProductsDeleted=function(t){var n=e.state.currentProducts.filter((function(e){return e.id!==t}));e.setState({currentProducts:n})},e.onPageChanged=function(){var t=(0,c.Z)((0,r.Z)().mark((function t(n){var a,s,c,i,o;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.getProducts(),s=localStorage.getItem("authTokens"),c=JSON.parse(s),i=c.access,o={method:"get",maxBodyLength:1/0,url:f.J.product.bystore+e.props.param.id+"/",headers:{Authorization:"Bearer "+i},data:h.a},g.Z.request(o).then((function(t){a=t.data;var r=n.currentPage,s=n.totalPages,c=n.pageLimit,i=(r-1)*c,o=a.slice(i,i+c);e.setState({currentPage:r,currentProducts:o,totalPages:s})})).catch((function(e){}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onChangeView=function(t){e.setState({view:t})},e.onChangeImage=function(t){e.setState({image:t})},e.getProducts=function(){var e=h.a.products,t=JSON.parse(localStorage.getItem("authTokens")).access,n={method:"get",maxBodyLength:1/0,url:f.J.product.list,headers:{Authorization:"Bearer "+t}};return g.Z.request(n).then((function(t){e=(e=t.data).data})).catch((function(e){})),e},e}return(0,o.Z)(n,[{key:"UNSAFE_componentWillMount",value:function(){var e=this.getProducts().length;this.setState({totalItems:e})}},{key:"render",value:function(){var e=this;return(0,x.jsxs)(l.Fragment,{children:[(0,x.jsx)("div",{className:"p-5 bg-primary bs-cover",style:{backgroundImage:"url(../../images/banner/50-Banner.webp)"},children:(0,x.jsx)("div",{className:"container text-center",children:(0,x.jsx)("span",{className:"display-5 px-3 bg-white rounded shadow",children:"Your Products"})})}),(0,x.jsx)(j,{}),(0,x.jsx)("div",{className:"container-fluid mb-3",children:(0,x.jsxs)("div",{className:"row",children:[(0,x.jsx)("div",{className:"col-md-3",children:(0,x.jsx)("div",{className:"card mb-3",children:(0,x.jsxs)("div",{className:"card-header",children:[(0,x.jsx)("span",{className:"align-middle",children:"Add card"}),(0,x.jsx)(N,{onChangeImage:this.onChangeImage,onSubmit:this.onSubmit,handleSelectChange:this.handleSelectChange})]})})}),(0,x.jsxs)("div",{className:"col-md-9",children:[(0,x.jsxs)("div",{className:"row",children:[(0,x.jsx)("div",{className:"col-7",children:(0,x.jsxs)("span",{className:"align-middle fw-bold",children:[this.state.totalItems," results for"," ",(0,x.jsx)("span",{className:"text-warning",children:'"t-shirts"'})]})}),(0,x.jsx)("div",{className:"col-5 d-flex justify-content-end",children:(0,x.jsxs)("div",{className:"btn-group ms-3",role:"group",children:[(0,x.jsx)("button",{"aria-label":"Grid",type:"button",onClick:function(){return e.onChangeView("grid")},className:"btn ".concat("grid"===this.state.view?"btn-primary":"btn-outline-primary"),children:(0,x.jsx)(m.G,{icon:p.szN})}),(0,x.jsx)("button",{"aria-label":"List",type:"button",onClick:function(){return e.onChangeView("list")},className:"btn ".concat("list"===this.state.view?"btn-primary":"btn-outline-primary"),children:(0,x.jsx)(m.G,{icon:p.xiG})})]})})]}),(0,x.jsx)("hr",{}),(0,x.jsxs)("div",{className:"row g-3",children:["grid"===this.state.view&&this.state.currentProducts.map((function(t,n){return(0,x.jsx)("div",{className:"col-md-4",children:(0,x.jsx)(y,{onProductsDeleted:e.onProductsDeleted,data:t})},n)})),"list"===this.state.view&&this.state.currentProducts.map((function(t,n){return(0,x.jsx)("div",{className:"col-md-12",children:(0,x.jsx)(P,{onProductsDeleted:e.onProductsDeleted,data:t})},n)}))]}),(0,x.jsx)("hr",{}),(0,x.jsx)(b,{totalRecords:this.state.totalItems,pageLimit:9,pageNeighbours:3,onPageChanged:this.onPageChanged,sizing:"",alignment:"justify-content-center"})]})]})})]})}}]),n}(l.Component);t.default=(0,v.M)(w)}}]);
//# sourceMappingURL=4080.74ad2ad4.chunk.js.map